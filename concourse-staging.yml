instance_groups:
- name: web
  vm_type: staging-concourse-web
  vm_extensions: [staging-concourse-lb, staging-concourse-target]
  azs: [z2]
  networks:
  - name: staging-concourse
  jobs:
  - name: atc
    properties:
      basic_auth_username: (( param "specify basic auth username" ))
      basic_auth_password: (( param "specify basic auth password" ))
      postgresql:
        database: (( grab terraform_outputs.staging_concourse_rds_name ))
        host: (( grab terraform_outputs.staging_concourse_rds_host ))
        role:
          name: (( grab terraform_outputs.staging_concourse_rds_username ))
          password: (( grab terraform_outputs.staging_concourse_rds_password ))

- name: worker
  instances: 2
  vm_type: staging-concourse-worker
  vm_extensions: [staging-concourse-profile]
  azs: [z2]
  networks:
  - name: staging-concourse

- name: iaas-worker
  vm_type: staging-concourse-iaas-worker
  vm_extensions: [staging-concourse-iaas-profile]
  instances: 1
